#!/bin/bash
#update record

# will probably have to change this to a function call
./displayrecords

source ./helpers

display_records

# reads in each line of database.txt to an index in the array, 'lines'
IFS=$'\n' read -d '' -r -a lines < database.txt

prompt="Which record line whould you like to replace?
	>: "
updateConfirm="You want to update this record?"
promptnew="What is the new record?
	   >: "

#input is the user's line selection
read -p "${prompt}" input        

read -p "${updateConfirm}: ${lines[$input]}: " confirmation

case $confirmation in
	y|Y) input_record 
	     newRecord="${record[0]}:${record[1]}:${record[2]}:${record[3]}"  # "${lines[$input]}"
	     printf "${newRecord}\n"
	     lines[${input}]=${newRecord}
	     printf '%s\n' "${lines[*]}" >| database.txt;;
	     
	n|N) echo "FILE NOT UPDATED" ;;
	*) echo "don't know" ;;
esac

exit 0
